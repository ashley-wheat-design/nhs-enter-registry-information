{% extends '../../layout.html' %}
{% set pageName = "Clinicians" %}
{% set currentSection = "record-procedure" %}

{% block beforeContent %}
<a class="nhsuk-back-link" href="javascript:history.back()">Back</a>
{% endblock %}

{% block content %}
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-two-thirds">

    <h1 class="nhsuk-heading-l">Clinicians</h1>

    {% set responsible = data.responsibleConsultant %}
    {% set supervising = data.supervisingSurgeon %}
    {% set leadSurgeons = data.leadSurgeons or [] %}

    <a role="button" class="nhsuk-button nhsuk-button--secondary nhsuk-u-margin-bottom-8"
      href="/record-procedure/clinician/find">
      Add clinician
    </a>

    <h2 class="nhsuk-heading-m ">Operation responsible consultant</h2>
    {% if responsible %}
    <div class="nhsuk-card">
        <div class="nhsuk-card__heading-container nhsuk-u-margin-bottom-0">
        <h3 class="nhsuk-card__heading nhsuk-heading-s nhsuk-u-margin-bottom-0">
          {{ responsible.title }} {{ responsible.firstName }} {{ responsible.lastName }}
        </h3>
        <ul class="nhsuk-card__actions nhsuk-u-margin-bottom-0">
      <li class="nhsuk-card__action">
        <a class="nhsuk-link" href="#">Remove<span class="nhsuk-u-visually-hidden"> (Karen Francis)</span></a>
      </li>
    </ul>
    </div>
    <div class="nhsuk-card__content">
        <div class="nhsuk-hint">{{ responsible.role }}</div>
        <p class="nhsuk-body"><strong>GMC number:</strong> {{ responsible.gmc or responsible.gmcNumber or responsible.registrationNumber }}</p>
      </div>
    </div>
    {% else %}
    <p class="nhsuk-body">No operation responsible consultant added yet.</p>
    {% endif %}

    <h2 class="nhsuk-heading-m nhsuk-u-margin-top-6">Operation supervising surgeon</h2>
    {% if supervising %}
    <div class="nhsuk-card">
        <div class="nhsuk-card__heading-container nhsuk-u-margin-bottom-0">
        <h3 class="nhsuk-card__heading nhsuk-heading-s nhsuk-u-margin-bottom-0">
          {{ supervising.title }} {{ supervising.firstName }} {{ supervising.lastName }}
        </h3>
        <ul class="nhsuk-card__actions nhsuk-u-margin-bottom-0">
      <li class="nhsuk-card__action">
        <a class="nhsuk-link" href="#">Remove<span class="nhsuk-u-visually-hidden"> (Karen Francis)</span></a>
      </li>
    </ul>
    </div>
    <div class="nhsuk-card__content">
        <div class="nhsuk-hint">{{ supervising.role }}</div>
        <p class="nhsuk-body"><strong>GMC number:</strong> {{ supervising.gmc or supervising.gmcNumber or supervising.registrationNumber }}</p>
      </div>
    </div>
    {% else %}
    <p class="nhsuk-body">No operation supervising surgeon added yet.</p>
    {% endif %}

    <h2 class="nhsuk-heading-m nhsuk-u-margin-top-6">Operation lead surgeon{% if leadSurgeons.length != 1 %}s{% endif %}</h2>
    <div class="nhsuk-inset-text nhsuk-u-margin-top-2 nhsuk-u-margin-bottom-4">
      <p class="nhsuk-body">You can add up to 4 operation lead surgeons.</p>
    </div>

    {% if leadSurgeons.length %}
      {% for c in leadSurgeons %}
      <div class="nhsuk-card nhsuk-u-margin-bottom-3">
        <div class="nhsuk-card__heading-container nhsuk-u-margin-bottom-0">
        <h3 class="nhsuk-card__heading nhsuk-heading-s nhsuk-u-margin-bottom-0">
          {{ c.title }} {{ c.firstName }} {{ c.lastName }}
        </h3>
        <ul class="nhsuk-card__actions nhsuk-u-margin-bottom-0">
      <li class="nhsuk-card__action">
        <a class="nhsuk-link" href="#">Remove<span class="nhsuk-u-visually-hidden"> (Karen Francis)</span></a>
      </li>
    </ul>
    </div>
    <div class="nhsuk-card__content">
        <div class="nhsuk-hint">{{ c.role }}</div>
        <p class="nhsuk-body"><strong>GMC number:</strong> {{ c.gmc or c.gmcNumber or c.registrationNumber }}</p>
      </div>
    </div>
      {% endfor %}
    {% else %}
      <p class="nhsuk-body">No lead surgeons added yet.</p>
    {% endif %}

    {% if leadSurgeons.length >= 4 %}
      <p class="nhsuk-body">You have added the maximum of 4 operation lead surgeons.</p>
    {% endif %}

    <form class="form" action="/record-procedure/clinician/clinicians-summary" method="post">
      <button class="nhsuk-button nhsuk-u-margin-top-6" data-module="nhsuk-button" type="submit">
        Confirm and continue
      </button>
    </form>

  </div>
</div>
{% endblock %}
